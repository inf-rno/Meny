/*!
 * meny 1.2
 * http://lab.hakim.se/meny
 * MIT licensed
 *
 * Created by Hakim El Hattab (http://hakim.se, @hakimel)
 */
var Meny={create:function(e){return function(){function A(){y="";S="";switch(o.position){case t:m="50% 0%";g="rotateX( 30deg ) translateY( -100% ) translateY( "+o.overlap+"px )";E="50% 0";x="translateY( "+o.height+"px ) rotateX( -15deg )";b={top:"-"+(o.height-o.overlap)+"px"};w={top:"0px"};T={top:"0px"};N={top:o.height+"px"};break;case n:m="100% 50%";g="rotateY( 30deg ) translateX( 100% ) translateX( -2px ) scale( 1.01 )";E="100% 50%";x="translateX( -"+o.width+"px ) rotateY( -15deg )";b={right:"-"+(o.width-o.overlap)+"px"};w={right:"0px"};T={left:"0px"};N={left:"-"+o.width+"px"};break;case r:m="50% 100%";g="rotateX( -30deg ) translateY( 100% ) translateY( -"+o.overlap+"px )";E="50% 100%";x="translateY( -"+o.height+"px ) rotateX( 15deg )";b={bottom:"-"+(o.height-o.overlap)+"px"};w={bottom:"0px"};T={top:"0px"};N={top:"-"+o.height+"px"};break;default:m="100% 50%";g="translateX( -100% ) translateX( "+o.overlap+"px ) scale( 1.01 ) rotateY( -30deg )";E="0 50%";x="translateX( "+o.width+"px ) rotateY( 15deg )";b={left:"-"+(o.width-o.overlap)+"px"};w={left:"0px"};T={left:"0px"};N={left:o.width+"px"};break}}function O(){Meny.addClass(u.wrapper,"meny-"+o.position);u.wrapper.style[Meny.prefix("perspective")]="800px";u.wrapper.style[Meny.prefix("perspectiveOrigin")]=E}function M(){u.cover=document.createElement("div");u.cover.style.position="absolute";u.cover.style.display="block";u.cover.style.width="100%";u.cover.style.height="100%";u.cover.style.left=0;u.cover.style.top=0;u.cover.style.zIndex=1e3;u.cover.style.visibility="hidden";u.cover.style.opacity=0;try{u.cover.style.background="rgba( 0, 0, 0, 0.4 )";u.cover.style.background="-ms-linear-gradient("+o.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)";u.cover.style.background="-moz-linear-gradient("+o.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)";u.cover.style.background="-webkit-linear-gradient("+o.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)"}catch(e){}if(s){u.cover.style[Meny.prefix("transition")]="all "+o.transitionDuration+" "+o.transitionEasing}u.contents.appendChild(u.cover)}function _(){var e=u.menu.style;switch(o.position){case t:e.width="100%";e.height=o.height+"px";break;case n:e.right="0";e.width=o.width+"px";e.height="100%";break;case r:e.bottom="0";e.width="100%";e.height=o.height+"px";break;case i:e.width=o.width+"px";e.height="100%";break}e.position="fixed";e.display="block";e.zIndex=1;if(s){e[Meny.prefix("transform")]=g;e[Meny.prefix("transformOrigin")]=m;e[Meny.prefix("transition")]="all "+o.transitionDuration+" "+o.transitionEasing}else{Meny.extend(e,b)}}function D(){var e=u.contents.style;if(s){e[Meny.prefix("transform")]=S;e[Meny.prefix("transformOrigin")]=E;e[Meny.prefix("transition")]="all "+o.transitionDuration+" "+o.transitionEasing}else{e.position=e.position.match(/relative|absolute|fixed/gi)?e.position:"relative";Meny.extend(e,T)}}function P(){if("ontouchstart"in window){Meny.bindEvent(document,"touchstart",q);Meny.bindEvent(document,"touchend",U)}Meny.bindEvent(document,"mousedown",j);Meny.bindEvent(document,"mouseup",I);if(o.bindMoveEvents){Meny.bindEvent(document,"mousemove",F)}}function H(){if(!d){d=true;Meny.addClass(u.wrapper,"meny-active");u.cover.style.height=u.contents.scrollHeight+"px";u.cover.style.visibility="visible";if(s){u.cover.style.opacity=1;u.contents.style[Meny.prefix("transform")]=x;u.menu.style[Meny.prefix("transform")]=y}else{C&&C.stop();C=Meny.animate(u.menu,w,500);k&&k.stop();k=Meny.animate(u.contents,N,500);L&&L.stop();L=Meny.animate(u.cover,{opacity:1},500)}Meny.dispatchEvent(u.menu,"open")}}function B(){if(d){d=false;Meny.removeClass(u.wrapper,"meny-active");if(s){u.cover.style.visibility="hidden";u.cover.style.opacity=0;u.contents.style[Meny.prefix("transform")]=S;u.menu.style[Meny.prefix("transform")]=g}else{C&&C.stop();C=Meny.animate(u.menu,b,500);k&&k.stop();k=Meny.animate(u.contents,T,500);L&&L.stop();L=Meny.animate(u.cover,{opacity:0},500,function(){u.cover.style.visibility="hidden"})}Meny.dispatchEvent(u.menu,"close")}}function j(e){v=true}function F(e){if(!v){var s=e.clientX-a,l=e.clientY-f;switch(o.position){case t:if(l>o.height){B()}else if(l<o.threshold){H()}break;case n:var c=u.wrapper.offsetWidth;if(s<c-o.width){B()}else if(s>c-o.threshold){H()}break;case r:var h=u.wrapper.offsetHeight;if(l<h-o.height){B()}else if(l>h-o.threshold){H()}break;case i:if(s>o.width){B()}else if(s<o.threshold){H()}break}}}function I(e){v=false}function q(e){l=e.touches[0].clientX-a;c=e.touches[0].clientY-f;h=null;p=null;Meny.bindEvent(document,"touchmove",R)}function R(e){h=e.touches[0].clientX-a;p=e.touches[0].clientY-f;var t=null;if(Math.abs(h-l)>Math.abs(p-c)){if(h<l-o.threshold){t=X}else if(h>l+o.threshold){t=W}}else{if(p<c-o.threshold){t=$}else if(p>c+o.threshold){t=V}}if(t&&t()){e.preventDefault()}}function U(e){Meny.unbindEvent(document,"touchmove",R);if(h===null&&p===null){z()}}function z(){var e=o.position===t&&c>o.height||o.position===n&&l<u.wrapper.offsetWidth-o.width||o.position===r&&c<u.wrapper.offsetHeight-o.height||o.position===i&&l<o.width;if(e){B()}}function W(){if(o.position===n&&d){B();return true}else if(o.position===i&&!d){H();return true}}function X(){if(o.position===n&&!d){H();return true}else if(o.position===i&&d){B();return true}}function V(){if(o.position===r&&d){B();return true}else if(o.position===t&&!d){H();return true}}function $(){if(o.position===r&&!d){H();return true}else if(o.position===t&&d){B();return true}}if(!e||!e.menuElement||!e.contentsElement){throw"You need to specify which menu and contents elements to use."}if(e.menuElement.parentNode!==e.contentsElement.parentNode){throw"The menu and contents elements must have the same parent."}var t="top",n="right",r="bottom",i="left";var s="WebkitPerspective"in document.body.style||"MozPerspective"in document.body.style||"msPerspective"in document.body.style||"OPerspective"in document.body.style||"perspective"in document.body.style;var o={width:300,height:300,bindMoveEvents:true,position:i,threshold:40,overlap:6,transitionDuration:"0.5s",transitionEasing:"ease"};var u={menu:e.menuElement,contents:e.contentsElement,wrapper:e.menuElement.parentNode,cover:null};var a=u.wrapper.offsetLeft,f=u.wrapper.offsetTop,l=null,c=null,h=null,p=null,d=false,v=false;var m,g,y,b,w,E,S,x,T,N;var C,k,L;Meny.extend(o,e);A();O();M();_();D();P();return{open:H,close:B,isOpen:function(){return d},addEventListener:function(e,t){u.menu&&Meny.bindEvent(u.menu,e,t)},removeEventListener:function(e,t){u.menu&&Meny.unbindEvent(u.menu,e,t)}}}()},animate:function(e,t,n,r){return function(){function a(){var t=1-Math.pow(1-(Date.now()-o)/n,5);for(var s in i){var l=i[s];e.style[s]=l.start+(l.end-l.start)*t+l.unit}if(t<1){u=setTimeout(a,1e3/60)}else{r&&r();f()}}function f(){clearTimeout(u)}var i={};for(var s in t){i[s]={start:parseFloat(e.style[s])||0,end:parseFloat(t[s]),unit:typeof t[s]==="string"&&t[s].match(/px|em|%/gi)?t[s].match(/px|em|%/gi)[0]:""}}var o=Date.now(),u;a();return{stop:f}}()},extend:function(e,t){for(var n in t){e[n]=t[n]}},prefix:function(e,t){var n=e.slice(0,1).toUpperCase()+e.slice(1),r=["Webkit","Moz","O","ms"];for(var i=0,s=r.length;i<s;i++){var o=r[i];if(typeof (t||document.body).style[o+n]!=="undefined"){return o+n}}return e},addClass:function(e,t){e.className=e.className.replace(/\s+$/gi,"")+" "+t},removeClass:function(e,t){e.className=e.className.replace(t,"")},bindEvent:function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else{e.attachEvent("on"+t,n)}},unbindEvent:function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else{e.detachEvent("on"+t,n)}},dispatchEvent:function(e,t,n){if(e){var r=document.createEvent("HTMLEvents",1,2);r.initEvent(t,true,true);Meny.extend(r,n);e.dispatchEvent(r)}},getQuery:function(){var e={};location.search.replace(/[A-Z0-9]+?=([\w|:|\/\.]*)/gi,function(t){e[t.split("=").shift()]=t.split("=").pop()});return e}};if(typeof Date.now!=="function")Date.now=function(){return(new Date).getTime()}
